<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Obsidian Gallery</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: #0d1117; color: #c9d1d9; padding: 20px; }
        h1 { text-align: center; color: #58a6ff; }
        #search { display: block; margin: 0 auto 20px; padding: 10px; width: 300px; border-radius: 5px; border: none; }
        .gallery { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; }
        .card { background: #161b22; border: 1px solid #30363d; border-radius: 6px; overflow: hidden; transition: transform 0.2s; }
        .card:hover { transform: scale(1.02); border-color: #58a6ff; }
        .card img { width: 100%; height: 200px; object-fit: cover; cursor: pointer; }
        .info { padding: 10px; font-size: 12px; text-align: center; }
        .btn { display: block; width: 100%; padding: 5px; background: #238636; color: white; border: none; cursor: pointer; margin-top: 5px; border-radius: 3px; }
        .btn:hover { background: #2ea043; }
        .loading { text-align: center; margin-top: 50px; font-size: 18px; }
    </style>
</head>
<body>

    <h1>ðŸ“¸ Your Image Gallery</h1>
    <input type="text" id="search" placeholder="Search images..." onkeyup="filterGallery()">
    <div id="gallery" class="gallery"></div>
    <div id="loading" class="loading">Loading images from GitHub...</div>

    <script>
        // CONFIG
        const USER = 'whomann';
        const REPO = 'obsidiangallery';
        const BRANCH = 'main';
        
        // Folders to scan (add more if you create new folders)
        const PATHS = ['', 'migrated_images']; 

        const gallery = document.getElementById('gallery');
        const loading = document.getElementById('loading');
        let allImages = [];

        async function fetchImages() {
            try {
                for (const path of PATHS) {
                    const url = `https://api.github.com/repos/${USER}/${REPO}/contents/${path}`;
                    const response = await fetch(url);
                    if (!response.ok) continue;
                    
                    const data = await response.json();
                    
                    data.forEach(file => {
                        if (file.type === 'file' && file.name.match(/\.(png|jpg|jpeg|gif|webp|mp4)$/i)) {
                            allImages.push(file);
                            createCard(file);
                        }
                    });
                }
                loading.style.display = 'none';
            } catch (error) {
                loading.innerText = 'Error loading images. Check console.';
                console.error(error);
            }
        }

        function createCard(file) {
            const rawUrl = file.download_url; // Direct link to image
            
            const div = document.createElement('div');
            div.className = 'card';
            div.innerHTML = `
                <a href="${rawUrl}" target="_blank">
                    <img src="${rawUrl}" loading="lazy" alt="${file.name}">
                </a>
                <div class="info">
                    <div title="${file.name}">${file.name.substring(0, 20)}...</div>
                    <button class="btn" onclick="copyLink('${rawUrl}')">Copy Link</button>
                </div>
            `;
            gallery.appendChild(div);
        }

        function copyLink(url) {
            navigator.clipboard.writeText(`![](${url})`);
            alert('Copied Markdown Link!');
        }

        function filterGallery() {
            const query = document.getElementById('search').value.toLowerCase();
            const cards = document.get
